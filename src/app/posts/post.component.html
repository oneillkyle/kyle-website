<div class="card grey lighten-3"
  [ngClass]="{'unpublished': currentDate < post.date}"
  *ngIf="!editingPost">
  <div class="card-content black-text">
    <span class="card-title">{{post.title}}</span>
    <div class="post-date">{{post.date | date}}</div>
    <p class="post-body" [innerHTML]="post.body"></p>
  </div>
  <div class="card-action" *ngIf="enableEdit || morePosts">
    <a *ngIf="enableEdit" (click)='editPost()' class="btn btn-primary">
      Edit
    </a>
    <a *ngIf="enableDelete" (click)='deletePost()' class="btn btn-primary">
      Delete
    </a>
    <a *ngIf="morePosts" (click)="loadMorePosts()" class="btn btn-primary">
      Load more posts
    </a>
  </div>
</div>

<div *ngIf="editingPost && enableEdit"
  class="card grey lighten-3">
  <div class="card-content black-text">
    <form (ngSubmit)="postForm.form.valid && createOrUpdatePost()" #postForm="ngForm">
      <fieldset class="form-group">
        <label for="post-title">Title</label>
        <input type="text" name="title" id="post-title" class="form-control" required [(ngModel)]="post.title"
          ngControl="title" #name="ngModel">
        <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
          Name is required
        </div>
      </fieldset>

      <fieldset class="form-group">
        <label for="post-date">Publish Date</label>
        <datepicker-ionic
          required
          singleSelect
          [(ngModel)]="date"
          [expanded]="true"
          name="date">
        </datepicker-ionic>

        Selected date is: {{ date }}
      </fieldset>

      <fieldset class="form-group">
        <label for="post-body">Body</label>
        <ckeditor
          name="body"
          [(ngModel)]="post.body"
          [config]="{uiColor: '#99000', extraPlugins: 'divarea'}"
          required></ckeditor>
      </fieldset>

      <button class="btn btn-primary"
        (click)="editingPost = false"
        *ngIf="!newPost">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="!postForm.form.valid">Submit</button>
    </form>
  </div>
</div>
